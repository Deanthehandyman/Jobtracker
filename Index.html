<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dean's Handyman Service LLC</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and Babel to run the code in the browser -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // --- IMPORTANT: ADD YOUR FIREBASE CONFIG HERE ---
        // Go to Firebase Console > Project Settings > General > Your Apps
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // --- BUSINESS INFO ---
        const BUSINESS = {
            name: "Dean's Handyman Service LLC",
            phone: "281-917-9914",
            location: "Pittsburg, Texas",
            payment: {
                square: "https://square.link/u/YOUR_LINK",
                paypal: "https://paypal.me/DeansHandyman",
                venmo: "https://venmo.com/DeansHandyman"
            }
        };

        // --- APP CODE ---
        function App() {
            const [view, setView] = useState('dashboard');
            const [activeTab, setActiveTab] = useState('leads');
            const [customers, setCustomers] = useState([]);
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [selectedCustomer, setSelectedCustomer] = useState(null);
            
            // Note: In a real GitHub environment, you would import Firebase SDKs here.
            // For this single-file demo, we will simulate the data so you can see the UI.
            // Once you have your Firebase keys, you can add the SDK scripts to the <head>.

            const [formData, setFormData] = useState({
                name: '', phone: '', email: '', address: '',
                labor: '', materials: '', description: '',
                status: 'Estimate', photos: []
            });

            const handleSave = (e) => {
                e.preventDefault();
                const total = (parseFloat(formData.labor) || 0) + (parseFloat(formData.materials) || 0);
                const newCust = { ...formData, id: Date.now(), total, createdAt: Date.now() };
                setCustomers([newCust, ...customers]);
                setIsModalOpen(false);
                setFormData({ name: '', phone: '', email: '', address: '', labor: '', materials: '', description: '', status: 'Estimate', photos: [] });
            };

            const sendDelivery = (customer, mode) => {
                const isEst = customer.status === 'Estimate';
                const body = `${BUSINESS.name}\n${isEst ? 'ESTIMATE' : 'INVOICE'}\nTotal: $${customer.total}\nWork: ${customer.description}`;
                if (mode === 'email') {
                    window.location.href = `mailto:${customer.email}?subject=Message from Dean&body=${encodeURIComponent(body)}`;
                } else {
                    window.location.href = `sms:${customer.phone}?body=${encodeURIComponent(body)}`;
                }
            };

            return (
                <div className="min-h-screen max-w-md mx-auto bg-slate-50 pb-32 shadow-2xl">
                    <header className="bg-slate-900 text-white p-8 rounded-b-[3rem] shadow-xl">
                        <h1 className="text-xl font-black italic uppercase italic leading-none">DEAN'S HANDYMAN</h1>
                        <p className="text-[10px] text-blue-400 font-bold uppercase tracking-widest mt-1">{BUSINESS.location}</p>
                        
                        <div className="grid grid-cols-2 gap-3 mt-6">
                            <div className="bg-white/5 p-4 rounded-3xl border border-white/10">
                                <p className="text-[9px] text-slate-500 font-bold uppercase">Open Leads</p>
                                <p className="text-2xl font-black">{customers.filter(c => c.status === 'Estimate').length}</p>
                            </div>
                            <div className="bg-white/5 p-4 rounded-3xl border border-white/10">
                                <p className="text-[9px] text-slate-500 font-bold uppercase">Active</p>
                                <p className="text-2xl font-black text-blue-400">{customers.filter(c => c.status === 'Active').length}</p>
                            </div>
                        </div>
                    </header>

                    <div className="px-6 -mt-6">
                        <div className="bg-white p-2 rounded-[2rem] shadow-lg flex gap-1">
                            {['leads', 'active', 'paid'].map(t => (
                                <button key={t} onClick={() => setActiveTab(t)} className={`flex-1 py-3 rounded-[1.8rem] font-bold text-[10px] uppercase ${activeTab === t ? 'bg-slate-900 text-white' : 'text-slate-400'}`}>
                                    {t}
                                </button>
                            ))}
                        </div>
                    </div>

                    <main className="p-6">
                        {customers.filter(c => {
                            if (activeTab === 'leads') return c.status === 'Estimate';
                            if (activeTab === 'active') return c.status === 'Active';
                            return c.status === 'Paid';
                        }).map(c => (
                            <div key={c.id} className="bg-white p-6 rounded-[2.5rem] mb-4 border border-slate-100 shadow-sm">
                                <div className="flex justify-between items-start mb-4">
                                    <h3 className="font-bold text-lg">{c.name}</h3>
                                    <p className="font-black text-blue-600">${c.total}</p>
                                </div>
                                <div className="flex gap-2">
                                    <button onClick={() => { setSelectedCustomer(c); setView('invoice'); }} className="flex-1 bg-slate-100 py-3 rounded-xl font-bold text-[10px] uppercase">View Doc</button>
                                    <button onClick={() => sendDelivery(c, 'sms')} className="flex-1 bg-slate-900 text-white py-3 rounded-xl font-bold text-[10px] uppercase">Text</button>
                                </div>
                            </div>
                        ))}
                    </main>

                    <button onClick={() => setIsModalOpen(true)} className="fixed bottom-8 left-1/2 -translate-x-1/2 bg-blue-600 text-white h-16 w-16 rounded-full shadow-2xl flex items-center justify-center z-50 border-4 border-white active:scale-90 transition-transform">
                        <span className="text-3xl font-bold">+</span>
                    </button>

                    {isModalOpen && (
                        <div className="fixed inset-0 bg-slate-900/90 backdrop-blur-sm z-[100] flex items-end p-4">
                            <div className="bg-white w-full rounded-[3rem] p-8 max-h-[90vh] overflow-y-auto">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-xl font-black uppercase">New Lead</h2>
                                    <button onClick={() => setIsModalOpen(false)} className="text-slate-400">âœ•</button>
                                </div>
                                <form onSubmit={handleSave} className="space-y-4">
                                    <input required placeholder="Client Name" className="w-full p-5 bg-slate-50 rounded-2xl outline-none" onChange={e => setFormData({...formData, name: e.target.value})} />
                                    <input required placeholder="Phone" className="w-full p-5 bg-slate-50 rounded-2xl outline-none" onChange={e => setFormData({...formData, phone: e.target.value})} />
                                    <input required placeholder="Email" type="email" className="w-full p-5 bg-slate-50 rounded-2xl outline-none" onChange={e => setFormData({...formData, email: e.target.value})} />
                                    <div className="grid grid-cols-2 gap-4">
                                        <input type="number" placeholder="Labor $" className="p-5 bg-slate-100 rounded-2xl outline-none" onChange={e => setFormData({...formData, labor: e.target.value})} />
                                        <input type="number" placeholder="Materials $" className="p-5 bg-slate-100 rounded-2xl outline-none" onChange={e => setFormData({...formData, materials: e.target.value})} />
                                    </div>
                                    <textarea placeholder="Description" className="w-full p-5 bg-slate-50 rounded-2xl outline-none" onChange={e => setFormData({...formData, description: e.target.value})} />
                                    <button type="submit" className="w-full bg-blue-600 text-white py-5 rounded-2xl font-black uppercase tracking-widest">Generate Quote</button>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

